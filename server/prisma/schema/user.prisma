model User {
    userId       String       @id @default(uuid())
    googleId     String?      @unique
    githubId     String?      @unique
    username     String       @unique
    email        String       @unique
    password     String
    avatarUrl    String?
    bio          String?
    refreshToken String?
    chats        UserChat[]
    messages     Message[]    @relation("UserSentMessages")
    followers    UserFollow[] @relation("UserFollowers")
    following    UserFollow[] @relation("UserFollowing")
    createdAt    DateTime     @default(now())
    updatedAt    DateTime     @updatedAt

    @@index([username])
}

model UserFollow {
    id          Int      @id @default(autoincrement())
    followerId  String
    follower    User     @relation("UserFollowers", fields: [followerId], references: [userId])
    followingId String
    following   User     @relation("UserFollowing", fields: [followingId], references: [userId])
    createdAt   DateTime @default(now())

    @@unique([followerId, followingId])
}
