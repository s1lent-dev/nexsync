model Chat {
    chatId     String     @id @default(uuid())
    name       String?
    isGroup    Boolean    @default(false)
    users      UserChat[] 
    messages   Message[]  @relation("ChatMessages")
    createdAt  DateTime   @default(now())
    updatedAt  DateTime   @updatedAt
    lastActive DateTime?

    @@index([isGroup])
}

model UserChat {
    id            String   @id @default(uuid())
    userId        String
    chatId        String
    chat          Chat     @relation(fields: [chatId], references: [chatId])
    user          User     @relation(fields: [userId], references: [userId])
    joinedAt      DateTime @default(now())
    isAdmin       Boolean  @default(false) 
    lastSeenAt    DateTime? 
    notifications Boolean   @default(true) 

    @@unique([userId, chatId])
}